<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>字符串函数 | SLS 案例中心</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/vuepress-test-blog/assets/css/0.styles.6e4ddb4c.css" as="style"><link rel="preload" href="/vuepress-test-blog/assets/js/app.1b4f8edd.js" as="script"><link rel="preload" href="/vuepress-test-blog/assets/js/2.bce32082.js" as="script"><link rel="preload" href="/vuepress-test-blog/assets/js/14.c16a383d.js" as="script"><link rel="prefetch" href="/vuepress-test-blog/assets/js/10.f2caa58f.js"><link rel="prefetch" href="/vuepress-test-blog/assets/js/11.22d7b858.js"><link rel="prefetch" href="/vuepress-test-blog/assets/js/12.e294d9fd.js"><link rel="prefetch" href="/vuepress-test-blog/assets/js/13.2859ca6f.js"><link rel="prefetch" href="/vuepress-test-blog/assets/js/15.ae954753.js"><link rel="prefetch" href="/vuepress-test-blog/assets/js/16.3c3f31da.js"><link rel="prefetch" href="/vuepress-test-blog/assets/js/17.0e5d6f5f.js"><link rel="prefetch" href="/vuepress-test-blog/assets/js/3.7104bd07.js"><link rel="prefetch" href="/vuepress-test-blog/assets/js/4.844b6742.js"><link rel="prefetch" href="/vuepress-test-blog/assets/js/5.7ea1e1bb.js"><link rel="prefetch" href="/vuepress-test-blog/assets/js/6.af602993.js"><link rel="prefetch" href="/vuepress-test-blog/assets/js/7.fb3145f4.js"><link rel="prefetch" href="/vuepress-test-blog/assets/js/8.31227a9a.js"><link rel="prefetch" href="/vuepress-test-blog/assets/js/9.00dfaa5e.js">
    <link rel="stylesheet" href="/vuepress-test-blog/assets/css/0.styles.6e4ddb4c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepress-test-blog/" class="home-link router-link-active"><!----> <span class="site-name">SLS 案例中心</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuepress-test-blog/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/vuepress-test-blog/config/" class="nav-link">
  Config
</a></div><div class="nav-item"><a href="/vuepress-test-blog/sqlfun/" class="nav-link router-link-active">
  SQL函数
</a></div><div class="nav-item"><a href="https://v1.vuepress.vuejs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vuepress-test-blog/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/vuepress-test-blog/config/" class="nav-link">
  Config
</a></div><div class="nav-item"><a href="/vuepress-test-blog/sqlfun/" class="nav-link router-link-active">
  SQL函数
</a></div><div class="nav-item"><a href="https://v1.vuepress.vuejs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>SQL函数</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress-test-blog/sqlfun/" aria-current="page" class="sidebar-link">函数概览</a></li><li><a href="/vuepress-test-blog/sqlfun/1聚合函数.html" class="sidebar-link">聚合函数</a></li><li><a href="/vuepress-test-blog/sqlfun/2字符串函数.html" class="active sidebar-link">字符串函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-test-blog/sqlfun/2字符串函数.html#chr函数" class="sidebar-link">chr函数</a></li><li class="sidebar-sub-header"><a href="/vuepress-test-blog/sqlfun/2字符串函数.html#codepoint函数" class="sidebar-link">codepoint函数</a></li><li class="sidebar-sub-header"><a href="/vuepress-test-blog/sqlfun/2字符串函数.html#concat函数" class="sidebar-link">concat函数</a></li><li class="sidebar-sub-header"><a href="/vuepress-test-blog/sqlfun/2字符串函数.html#from-utf8函数" class="sidebar-link">from_utf8函数</a></li><li class="sidebar-sub-header"><a href="/vuepress-test-blog/sqlfun/2字符串函数.html#length函数" class="sidebar-link">length函数</a></li><li class="sidebar-sub-header"><a href="/vuepress-test-blog/sqlfun/2字符串函数.html#levenshtein-distance函数" class="sidebar-link">levenshtein_distance函数</a></li><li class="sidebar-sub-header"><a href="/vuepress-test-blog/sqlfun/2字符串函数.html#lower函数" class="sidebar-link">lower函数</a></li><li class="sidebar-sub-header"><a href="/vuepress-test-blog/sqlfun/2字符串函数.html#lpad函数" class="sidebar-link">lpad函数</a></li><li class="sidebar-sub-header"><a href="/vuepress-test-blog/sqlfun/2字符串函数.html#ltrim函数" class="sidebar-link">ltrim函数</a></li><li class="sidebar-sub-header"><a href="/vuepress-test-blog/sqlfun/2字符串函数.html#normalize函数" class="sidebar-link">normalize函数</a></li><li class="sidebar-sub-header"><a href="/vuepress-test-blog/sqlfun/2字符串函数.html#position函数" class="sidebar-link">position函数</a></li><li class="sidebar-sub-header"><a href="/vuepress-test-blog/sqlfun/2字符串函数.html#replace函数" class="sidebar-link">replace函数</a></li><li class="sidebar-sub-header"><a href="/vuepress-test-blog/sqlfun/2字符串函数.html#reverse函数" class="sidebar-link">reverse函数</a></li><li class="sidebar-sub-header"><a href="/vuepress-test-blog/sqlfun/2字符串函数.html#rpad函数" class="sidebar-link">rpad函数</a></li><li class="sidebar-sub-header"><a href="/vuepress-test-blog/sqlfun/2字符串函数.html#rtrim函数" class="sidebar-link">rtrim函数</a></li><li class="sidebar-sub-header"><a href="/vuepress-test-blog/sqlfun/2字符串函数.html#split函数" class="sidebar-link">split函数</a></li><li class="sidebar-sub-header"><a href="/vuepress-test-blog/sqlfun/2字符串函数.html#split-part函数" class="sidebar-link">split_part函数</a></li><li class="sidebar-sub-header"><a href="/vuepress-test-blog/sqlfun/2字符串函数.html#split-to-map函数" class="sidebar-link">splittomap函数</a></li><li class="sidebar-sub-header"><a href="/vuepress-test-blog/sqlfun/2字符串函数.html#strpos函数" class="sidebar-link">strpos函数</a></li><li class="sidebar-sub-header"><a href="/vuepress-test-blog/sqlfun/2字符串函数.html#substr函数" class="sidebar-link">substr函数</a></li><li class="sidebar-sub-header"><a href="/vuepress-test-blog/sqlfun/2字符串函数.html#to-utf8函数" class="sidebar-link">to_utf8函数</a></li><li class="sidebar-sub-header"><a href="/vuepress-test-blog/sqlfun/2字符串函数.html#trim函数" class="sidebar-link">trim函数</a></li><li class="sidebar-sub-header"><a href="/vuepress-test-blog/sqlfun/2字符串函数.html#upper函数" class="sidebar-link">upper函数</a></li></ul></li><li><a href="/vuepress-test-blog/sqlfun/3日期和时间函数.html" class="sidebar-link">日期和时间函数</a></li><li><a href="/vuepress-test-blog/sqlfun/4JSON函数.html" class="sidebar-link">JSON函数</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="字符串函数"><a href="#字符串函数" class="header-anchor">#</a> 字符串函数</h1> <p>本文介绍字符串函数的基本语法和示例。</p> <h1 id="函数示例"><a href="#函数示例" class="header-anchor">#</a> 函数示例</h1> <p>日志服务支持如下字符串函数。</p> <blockquote><p>在日志服务分析语句中，表示字符串的字符必须使用单引号（''）包裹，无符号包裹或被双引号（&quot;&quot;）包裹的字符表示字段名或列名。例如：'status'表示字符串status，status或&quot;status&quot;表示日志字段status。</p></blockquote> <table><thead><tr><th>函数名称</th> <th>语法</th> <th>说明</th></tr></thead> <tbody><tr><td><a href="#chr%E5%87%BD%E6%95%B0">chr函数</a></td> <td>chr( <em>x</em> )</td> <td>将ASCII码转换为字符。</td></tr> <tr><td><a href="#codepoint%E5%87%BD%E6%95%B0">codepoint函数</a></td> <td>codepoint( <em>x</em> )</td> <td>将字符转换为ASCII码。</td></tr> <tr><td><a href="#concat%E5%87%BD%E6%95%B0">concat函数</a></td> <td>concat( <em>x</em> , <em>y</em> ...)</td> <td>将多个字符串拼接成一个字符串。</td></tr> <tr><td><a href="#from_utf8%E5%87%BD%E6%95%B0">from_utf8函数</a></td> <td>from_utf8( <em>x</em> )</td> <td>将二进制字符串解码为UTF-8编码格式，并使用默认字符U+FFFD替换无效的UTF-8字符。</td></tr> <tr><td><a href="#from_utf8%E5%87%BD%E6%95%B0">from_utf8函数</a></td> <td>from_utf8( <em>x</em> , <em>replace_string</em> )</td> <td>将二进制字符串解码为UTF-8编码格式，并使用自定义字符串替换无效的UTF-8字符。</td></tr> <tr><td><a href="#length%E5%87%BD%E6%95%B0">length函数</a></td> <td>length( <em>x</em> )</td> <td>计算字符串的长度。</td></tr> <tr><td><a href="#levenshtein_distance%E5%87%BD%E6%95%B0">levenshtein_distance函数</a></td> <td>levenshtein_distance( <em>x</em> , <em>y</em> )</td> <td>计算 <em>x</em> 和 <em>y</em> 之间的最小编辑距离。</td></tr> <tr><td><a href="#lower%E5%87%BD%E6%95%B0">lower函数</a></td> <td>lower( <em>x</em> )</td> <td>将字符串转换为小写形式。</td></tr> <tr><td><a href="#lpad%E5%87%BD%E6%95%B0">lpad函数</a></td> <td>lpad( <em>x</em> , <em>length</em> , <em>lpad_string</em> )</td> <td>在字符串的开头填充指定字符，直到指定长度后返回结果字符串。</td></tr> <tr><td><a href="#ltrim%E5%87%BD%E6%95%B0">ltrim函数</a></td> <td>ltrim( <em>x</em> )</td> <td>删除字符串开头的空格。</td></tr> <tr><td><a href="#normalize%E5%87%BD%E6%95%B0">normalize函数</a></td> <td>normalize( <em>x</em> )</td> <td>使用NFC格式将字符串格式化。</td></tr> <tr><td><a href="#position%E5%87%BD%E6%95%B0">position函数</a></td> <td>position( <em>sub_string</em> in <em>x</em> )</td> <td>返回目标子串在字符串中的位置。</td></tr> <tr><td><a href="#replace%E5%87%BD%E6%95%B0">replace函数</a></td> <td>replace( <em>x</em> , <em>sub_string</em> )</td> <td>删除字符串中匹配的字符。</td></tr> <tr><td><a href="#replace%E5%87%BD%E6%95%B0">replace函数</a></td> <td>replace( <em>x</em> , <em>sub_string</em> , <em>replace_string</em> )</td> <td>将字符串中所匹配的字符替换为其他指定字符。</td></tr> <tr><td><a href="#reverse%E5%87%BD%E6%95%B0">reverse函数</a></td> <td>reverse( <em>x</em> )</td> <td>返回反向顺序的字符串。</td></tr> <tr><td><a href="#rpad%E5%87%BD%E6%95%B0">rpad函数</a></td> <td>rpad( <em>x</em> , <em>length</em> , <em>rpad_string</em> )</td> <td>在字符串的尾部填充指定字符，直到指定长度后返回结果字符串。</td></tr> <tr><td><a href="#rtrim%E5%87%BD%E6%95%B0">rtrim函数</a></td> <td>rtrim( <em>x</em> )</td> <td>删除字符串中结尾的空格。</td></tr> <tr><td><a href="#split%E5%87%BD%E6%95%B0">split函数</a></td> <td>split( <em>x</em> , <em>delimeter</em> )</td> <td>使用指定的分隔符拆分字符串，并返回子串集合。</td></tr> <tr><td><a href="#split%E5%87%BD%E6%95%B0">split函数</a></td> <td>split( <em>x</em> , <em>delimeter</em> , <em>limit</em> )</td> <td>通过指定的分隔符拆分字符串并使用 <em>limit</em> 限制字符串拆分的个数，然后返回拆分后的子串集合。</td></tr> <tr><td><a href="#split_part%E5%87%BD%E6%95%B0">split_part函数</a></td> <td>split_part( <em>x</em> , <em>delimeter</em> , <em>part</em> )</td> <td>使用指定的分隔符拆分字符串，并返回指定位置的内容。</td></tr> <tr><td><a href="#split_to_map%E5%87%BD%E6%95%B0">split_to_map函数</a></td> <td>split_to_map( <em>x</em> , <em>delimiter01</em> , <em>delimiter02</em> )</td> <td>使用指定的第一个分隔符拆分字符串，然后再使用指定的第二个分隔符进行第二次拆分。</td></tr> <tr><td><a href="#strpos%E5%87%BD%E6%95%B0">strpos函数</a></td> <td>strpos( <em>x</em> , <em>sub_string</em> )</td> <td>返回目标子串在字符串中的位置。与position( <em>sub_string</em> in <em>x</em> )函数等价。</td></tr> <tr><td><a href="#substr%E5%87%BD%E6%95%B0">substr函数</a></td> <td>substr( <em>x</em> , <em>start</em> )</td> <td>返回字符串中指定位置的子串。</td></tr> <tr><td><a href="#substr%E5%87%BD%E6%95%B0">substr函数</a></td> <td>substr( <em>x</em> , <em>start</em> , <em>length</em> )</td> <td>返回字符串中指定位置的子串，并指定子串长度。</td></tr> <tr><td><a href="#to_utf8%E5%87%BD%E6%95%B0">to_utf8函数</a></td> <td>to_utf8( <em>x</em> )</td> <td>将字符串转换为UTF-8编码格式。</td></tr> <tr><td><a href="#trim%E5%87%BD%E6%95%B0">trim函数</a></td> <td>trim( <em>x</em> )</td> <td>删除字符串中开头和结尾的空格。</td></tr> <tr><td><a href="#upper%E5%87%BD%E6%95%B0">upper函数</a></td> <td>upper( <em>x</em> )</td> <td>将字符串转化为大写形式。</td></tr></tbody></table> <h1 id="案例"><a href="#案例" class="header-anchor">#</a> 案例</h1> <h2 id="chr函数"><a href="#chr函数" class="header-anchor">#</a> chr函数</h2> <p>CHR函数用于将ASCII码转换为字符。</p> <div class="language-unknow extra-class"><pre class="language-text"><code>chr(x)
</code></pre></div><table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td><em>x</em></td> <td>ASCII码。</td></tr></tbody></table> <p>varchar类型。</p> <p>判断region字段值的首字母是否是c开头，其中99为ASCII码，代表小写字母c。</p> <ul><li><p>字段样例</p> <div class="language-unknow extra-class"><pre class="language-text"><code>region:cn-shanghai
</code></pre></div></li> <li><p>查询和分析语句</p> <div class="language-unknow extra-class"><pre class="language-text"><code>* | SELECT substr(region, 1, 1)=chr(99)
</code></pre></div></li> <li><p>查询和分析结果</p> <p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7495526261/p294736.png" alt="chr"></p></li></ul> <h2 id="codepoint函数"><a href="#codepoint函数" class="header-anchor">#</a> codepoint函数</h2> <p>codepoint函数用于将字符转换为ASCII码。</p> <div class="language-unknow extra-class"><pre class="language-text"><code>codepoint(x)
</code></pre></div><table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td><em>x</em></td> <td>参数值为varchar类型。</td></tr></tbody></table> <p>integer类型。</p> <p>判断region字段值的首字母是否是c开头，其中99为ASCII码，代表小写字母c。</p> <ul><li><p>字段样例</p> <div class="language-unknow extra-class"><pre class="language-text"><code>upstream_status:200
</code></pre></div></li> <li><p>查询和分析语句</p> <div class="language-unknow extra-class"><pre class="language-text"><code>* | SELECT codepoint(cast (substr(region, 1, 1) AS char(1))) =99
</code></pre></div></li> <li><p>查询和分析结果</p> <p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7495526261/p294769.png" alt="codepoint"></p></li></ul> <h2 id="concat函数"><a href="#concat函数" class="header-anchor">#</a> concat函数</h2> <p>concat函数用于将多个字符串拼接成一个字符串。</p> <div class="language-unknow extra-class"><pre class="language-text"><code>concat(x, y...)
</code></pre></div><table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td><em>x</em></td> <td>参数值为varchar类型。</td></tr> <tr><td><em>y</em></td> <td>参数值为varchar类型。</td></tr></tbody></table> <p>varchar类型。</p> <p>将region字段和request_method字段的值拼接为一个字符串。</p> <ul><li><p>字段样例</p> <div class="language-unknow extra-class"><pre class="language-text"><code>region:cn-shanghai
time_local:14/Jul/2021:02:19:40
</code></pre></div></li> <li><p>查询和分析语句</p> <div class="language-unknow extra-class"><pre class="language-text"><code>* | SELECT concat(region,'-',time_local)
</code></pre></div></li> <li><p>查询和分析结果</p> <p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7495526261/p294429.png" alt="concat函数"></p></li></ul> <h2 id="from-utf8函数"><a href="#from-utf8函数" class="header-anchor">#</a> from_utf8函数</h2> <p>from_utf8函数用于将二进制字符串解码为UTF-8编码格式。</p> <ul><li><p>使用默认字符U+FFFD替换无效的UTF-8字符。</p> <div class="language-unknow extra-class"><pre class="language-text"><code>from_utf8(x)
</code></pre></div></li> <li><p>使用自定义字符替换无效的UTF-8字符。</p> <div class="language-unknow extra-class"><pre class="language-text"><code>from_utf8(x,replace_string)
</code></pre></div></li></ul> <table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td><em>x</em></td> <td>参数值为binary类型。</td></tr> <tr><td><em>replace_string</em></td> <td>用于替换的字符串。只能为单个字符或空格。</td></tr></tbody></table> <p>varchar类型。</p> <ul><li><p>将二进制字符串0x80解码为UTF-8编码格式，并使用默认字符U+FFFD替换返回结果中无效的UTF-8字符。U+FFFD显示形式为�。</p> <ul><li><p>查询和分析语句</p> <div class="language-unknow extra-class"><pre class="language-text"><code>* | SELECT from_utf8(from_base64('0x80'))
</code></pre></div></li> <li><p>查询和分析结果</p> <p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1935840361/p314261.png" alt="from_utf8"></p></li></ul></li> <li><p>将二进制字符串0x80解码为UTF-8编码格式，并使用0替换返回结果中无效的UTF-8字符。</p> <ul><li><p>查询和分析语句</p> <div class="language-unknow extra-class"><pre class="language-text"><code>* | SELECT from_utf8(from_base64('0x80'),'0')
</code></pre></div></li> <li><p>查询和分析结果</p> <p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7055840361/p314265.png" alt="from_utf8"></p></li></ul></li></ul> <h2 id="length函数"><a href="#length函数" class="header-anchor">#</a> length函数</h2> <p>length函数用于计算字符串的长度。</p> <div class="language-unknow extra-class"><pre class="language-text"><code>length(x)
</code></pre></div><table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td><em>x</em></td> <td>参数值为varchar类型。</td></tr></tbody></table> <p>bigint类型。</p> <p>计算http_user_agent字段值的长度。</p> <ul><li><p>字段样例</p> <div class="language-unknow extra-class"><pre class="language-text"><code>http_user_agent:Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.2 (KHTML, like Gecko) Chrome/22.0.1216.0 Safari/537.2
</code></pre></div></li> <li><p>查询和分析语句</p> <div class="language-unknow extra-class"><pre class="language-text"><code>* | SELECT length(http_user_agent)
</code></pre></div></li> <li><p>查询和分析结果</p> <p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7495526261/p294433.png" alt="length函数"></p></li></ul> <h2 id="levenshtein-distance函数"><a href="#levenshtein-distance函数" class="header-anchor">#</a> levenshtein_distance函数</h2> <p>levenshtein_distance函数用于计算两个字符串的最小编辑距离。</p> <div class="language-unknow extra-class"><pre class="language-text"><code>levenshtein_distance(x, y)
</code></pre></div><table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td><em>x</em></td> <td>参数值为varchar类型。</td></tr> <tr><td><em>y</em></td> <td>参数值为varchar类型。</td></tr></tbody></table> <p>bigint类型。</p> <p>查询instance_id字段值和owner_id字段值的最小编辑距离。</p> <ul><li><p>字段样例</p> <div class="language-unknow extra-class"><pre class="language-text"><code>instance_id:i-01
owner_id:owner-01
</code></pre></div></li> <li><p>查询和分析语句</p> <div class="language-unknow extra-class"><pre class="language-text"><code>* | SELECT levenshtein_distance(owner_id,instance_id)
</code></pre></div></li> <li><p>查询和分析结果</p> <p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7495526261/p294788.png" alt="levenshtein_distance"></p></li></ul> <h2 id="lower函数"><a href="#lower函数" class="header-anchor">#</a> lower函数</h2> <p>lower函数用于将字符串转换为小写形式。</p> <div class="language-unknow extra-class"><pre class="language-text"><code>lower(x)
</code></pre></div><table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td><em>x</em></td> <td>参数值为varchar类型。</td></tr></tbody></table> <p>varchar类型。</p> <p>将request_method字段的值转换为小写形式。</p> <ul><li><p>字段样例</p> <div class="language-unknow extra-class"><pre class="language-text"><code>request_method:GET
</code></pre></div></li> <li><p>查询和分析语句</p> <div class="language-unknow extra-class"><pre class="language-text"><code>* | SELECT lower(request_method)
</code></pre></div></li> <li><p>查询和分析结果</p> <p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7495526261/p294436.png" alt="lower函数"></p></li></ul> <h2 id="lpad函数"><a href="#lpad函数" class="header-anchor">#</a> lpad函数</h2> <p>lpad函数用于在目标字符串的开头填充指定的字符，直到指定长度后返回结果字符串。</p> <div class="language-unknow extra-class"><pre class="language-text"><code>lpad(x, length, lpad_string)
</code></pre></div><table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td><em>x</em></td> <td>参数值为varchar类型。</td></tr> <tr><td><em>length</em></td> <td>整数，用于指定结果字符串的长度。 * 当字符串的长度小于 <em>length</em> 时，在字符串的开头填充指定的字符。  * 当字符串的长度大于 <em>length</em> 时，只返回字符串中的 <em>length</em> 个字符。</td></tr> <tr><td><em>lpad_string</em></td> <td>新填充的字符。</td></tr></tbody></table> <p>varchar类型。</p> <p>将instance_id字段值的长度补充到10位，不足10位时，在字段值的开头补充0。</p> <ul><li><p>字段样例</p> <div class="language-unknow extra-class"><pre class="language-text"><code>instance_id:i-01
</code></pre></div></li> <li><p>查询和分析语句</p> <div class="language-unknow extra-class"><pre class="language-text"><code>* | SELECT lpad(instance_id,10,'0')
</code></pre></div></li> <li><p>查询和分析结果</p> <p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7495526261/p294773.png" alt="lpad"></p></li></ul> <h2 id="ltrim函数"><a href="#ltrim函数" class="header-anchor">#</a> ltrim函数</h2> <p>ltrim函数用于删除字符串中开头的空格。</p> <div class="language-unknow extra-class"><pre class="language-text"><code>ltrim(x)
</code></pre></div><table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td><em>x</em></td> <td>参数值为varchar类型。</td></tr></tbody></table> <p>varchar类型。</p> <p>删除region字段值开头的空格。</p> <ul><li><p>字段样例</p> <div class="language-unknow extra-class"><pre class="language-text"><code>region: cn-shanghai
</code></pre></div></li> <li><p>查询和分析语句</p> <div class="language-unknow extra-class"><pre class="language-text"><code>* | SELECT ltrim(region)
</code></pre></div></li> <li><p>查询和分析结果</p> <p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7495526261/p294774.png" alt="ltrim"></p></li></ul> <h2 id="normalize函数"><a href="#normalize函数" class="header-anchor">#</a> normalize函数</h2> <p>normalize函数使用NFC格式将字符串格式化。</p> <div class="language-unknow extra-class"><pre class="language-text"><code>normalize(x)
</code></pre></div><table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td><em>x</em></td> <td>参数值为varchar类型。</td></tr></tbody></table> <p>varchar类型。</p> <p>使用NFC格式将字符串schön格式化。</p> <ul><li><p>查询和分析语句</p> <div class="language-unknow extra-class"><pre class="language-text"><code>* | SELECT normalize('schön')
</code></pre></div></li> <li><p>查询和分析结果</p> <p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3628540361/p313284.png" alt="normalize"></p></li></ul> <h2 id="position函数"><a href="#position函数" class="header-anchor">#</a> position函数</h2> <p>position函数用于查询目标子串在字符串中的位置。</p> <div class="language-unknow extra-class"><pre class="language-text"><code>position(sub_string in x)
</code></pre></div><table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td><em>sub_string</em></td> <td>目标子串。</td></tr> <tr><td><em>x</em></td> <td>参数值为varchar类型。</td></tr></tbody></table> <p>int类型，从1开始。</p> <p>查询子串cn在region字段值中位置。</p> <ul><li><p>字段样例</p> <div class="language-unknow extra-class"><pre class="language-text"><code>region:cn-shanghai
</code></pre></div></li> <li><p>查询和分析语句</p> <div class="language-unknow extra-class"><pre class="language-text"><code>* | SELECT position('cn' in region)
</code></pre></div></li> <li><p>查询和分析结果</p> <p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7495526261/p294454.png" alt="position函数"></p></li></ul> <h2 id="replace函数"><a href="#replace函数" class="header-anchor">#</a> replace函数</h2> <p>replace函数用于删除字符串中所匹配的字符或者将字符串中所匹配的字符替换为其他指定字符。</p> <ul><li><p>删除字符串中所匹配的字符。</p> <div class="language-unknow extra-class"><pre class="language-text"><code>replace(x, sub_string)
</code></pre></div></li> <li><p>将字符串中所匹配的字符替换为其他指定字符。</p> <div class="language-unknow extra-class"><pre class="language-text"><code>replace(x, sub_string, replace_string)
</code></pre></div></li></ul> <table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td><em>x</em></td> <td>参数值为varchar类型。</td></tr> <tr><td><em>sub_string</em></td> <td>目标子串。</td></tr> <tr><td><em>replace_string</em></td> <td>用于替换的子串。</td></tr></tbody></table> <p>varchar类型。</p> <ul><li><p>示例1：将region字段值中的cn替换为中国。</p> <ul><li><p>字段示例</p> <div class="language-unknow extra-class"><pre class="language-text"><code>region:cn-shanghai
</code></pre></div></li> <li><p>查询和分析语句</p> <div class="language-unknow extra-class"><pre class="language-text"><code>* | select replace(region,'cn','中国')
</code></pre></div></li> <li><p>查询和分析结果</p> <p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6096146261/p240200.png" alt="replace"></p></li></ul></li> <li><p>示例2：删除region字段值中的cn-。</p> <ul><li><p>字段示例</p> <div class="language-unknow extra-class"><pre class="language-text"><code>region:cn-shanghai
</code></pre></div></li> <li><p>查询和分析语句</p> <div class="language-unknow extra-class"><pre class="language-text"><code>* | select replace(region,'cn-')
</code></pre></div></li> <li><p>查询和分析结果</p> <p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3628540361/p313241.png" alt="replace"></p></li></ul></li></ul> <h2 id="reverse函数"><a href="#reverse函数" class="header-anchor">#</a> reverse函数</h2> <p>reverse函数用于返回反向顺序的字符串。</p> <div class="language-unknow extra-class"><pre class="language-text"><code>reverse(x)
</code></pre></div><table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td><em>x</em></td> <td>参数值为varchar类型。</td></tr></tbody></table> <p>varchar类型。</p> <p>将request_method字段值反向排序。</p> <ul><li><p>字段样例</p> <div class="language-unknow extra-class"><pre class="language-text"><code>request_method:GET
</code></pre></div></li> <li><p>查询和分析语句</p> <div class="language-unknow extra-class"><pre class="language-text"><code>* | SELECT reverse(request_method)
</code></pre></div></li> <li><p>查询和分析结果</p> <p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7495526261/p294451.png" alt="reverse"></p></li></ul> <h2 id="rpad函数"><a href="#rpad函数" class="header-anchor">#</a> rpad函数</h2> <p>rpad函数用于在字符串的尾部填充指定的字符，直到指定长度后返回结果字符串。</p> <div class="language-unknow extra-class"><pre class="language-text"><code>rpad(x, length, rpad_string)
</code></pre></div><table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td><em>x</em></td> <td>参数值为varchar类型。</td></tr> <tr><td><em>length</em></td> <td>整数，用于指定结果字符串的长度。 * 当字符串的长度小于 <em>length</em> 时，在字符串的尾部填充指定的字符。  * 当字符串的长度大于 <em>length</em> 时，只返回字符串中的 <em>length</em> 个字符。</td></tr> <tr><td><em>lpad_string</em></td> <td>新填充的字符。</td></tr></tbody></table> <p>varchar类型。</p> <p>将instance_id字段值的长度补充到10位，不足10位时，在字段值的尾部补充0。</p> <ul><li><p>字段样例</p> <div class="language-unknow extra-class"><pre class="language-text"><code>instance_id:i-01
</code></pre></div></li> <li><p>查询和分析语句</p> <div class="language-unknow extra-class"><pre class="language-text"><code>* | SELECT rpad(instance_id,10,'0')
</code></pre></div></li> <li><p>查询和分析结果</p> <p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7495526261/p294779.png" alt="rpad"></p></li></ul> <h2 id="rtrim函数"><a href="#rtrim函数" class="header-anchor">#</a> rtrim函数</h2> <p>rtrim函数用于删除字符串中结尾的空格。</p> <div class="language-unknow extra-class"><pre class="language-text"><code>rtrim(x)
</code></pre></div><table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td><em>x</em></td> <td>参数值为varchar类型。</td></tr></tbody></table> <p>varchar类型。</p> <p>删除instance_id字段值中结尾的空格。</p> <ul><li><p>字段样例</p> <div class="language-unknow extra-class"><pre class="language-text"><code>instance_id:i-01 
</code></pre></div></li> <li><p>查询和分析语句</p> <div class="language-unknow extra-class"><pre class="language-text"><code>* | SELECT rtrim(instance_id)
</code></pre></div></li> <li><p>查询和分析结果</p> <p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8495526261/p294781.png" alt="rtrim"></p></li></ul> <h2 id="split函数"><a href="#split函数" class="header-anchor">#</a> split函数</h2> <p>split函数用于通过指定的分隔符拆分字符串，并返回拆分后的子串集合。</p> <ul><li><p>通过指定的分隔符拆分字符串，并返回拆分后的子串集合。</p> <div class="language-unknow extra-class"><pre class="language-text"><code>split(x, delimeter)
</code></pre></div></li> <li><p>通过指定的分隔符拆分字符串并使用 <em>limit</em> 限制字符串拆分的个数，然后返回拆分后的子串集合。</p> <div class="language-unknow extra-class"><pre class="language-text"><code>split(x,delimeter,limit)
</code></pre></div></li></ul> <table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td><em>x</em></td> <td>参数值为varchar类型。</td></tr> <tr><td><em>delimeter</em></td> <td>分隔符。</td></tr> <tr><td><em>limit</em></td> <td>限制字符串拆分的个数，大于0的整数。</td></tr></tbody></table> <p>array类型。</p> <ul><li><p>示例1：使用正斜线（/）将request_uri字段的值拆分成4个子串，并返回子串的集合。</p> <ul><li><p>字段样例</p> <div class="language-unknow extra-class"><pre class="language-text"><code>request_uri:/request/path-1/file-9
</code></pre></div></li> <li><p>查询和分析语句</p> <div class="language-unknow extra-class"><pre class="language-text"><code>* | SELECT split(request_uri,'/')
</code></pre></div></li> <li><p>查询和分析结果</p> <p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5196235361/p313256.png" alt="split"></p></li></ul></li> <li><p>示例2：使用正斜线（/）将request_uri字段的值拆分成3个子串，并返回子串的集合。</p> <ul><li><p>字段样例</p> <div class="language-unknow extra-class"><pre class="language-text"><code>request_uri:/request/path-1/file-9
</code></pre></div></li> <li><p>查询和分析语句</p> <div class="language-unknow extra-class"><pre class="language-text"><code>* | SELECT split(request_uri,'/',3)
</code></pre></div></li> <li><p>查询和分析结果</p> <p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3628540361/p313254.png" alt="split"></p></li></ul></li></ul> <h2 id="split-part函数"><a href="#split-part函数" class="header-anchor">#</a> split_part函数</h2> <p>split_part函数通过指定的分隔符拆分字符串，并返回指定位置的内容。</p> <div class="language-unknow extra-class"><pre class="language-text"><code>split_part(x, delimeter, part)
</code></pre></div><table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td><em>x</em></td> <td>参数值为varchar类型。</td></tr> <tr><td><em>delimeter</em></td> <td>分隔符。</td></tr> <tr><td><em>part</em></td> <td>大于0的整数。</td></tr></tbody></table> <p>varchar类型。</p> <p>使用英文问号（?）拆分request_uri字段的值并返回第一个子串（即文件路径部分），然后统计不同路径对应的请求数量。</p> <ul><li><p>查询和分析语句</p> <div class="language-unknow extra-class"><pre class="language-text"><code>* | SELECT count(*) AS PV, split_part(request_uri, '?', 1) AS Path GROUP BY Path ORDER BY pv DESC LIMIT 3
</code></pre></div></li> <li><p>查询和分析结果</p> <p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1415975261/p232326.png" alt="TOP3访问地址"></p></li></ul> <h2 id="split-to-map函数"><a href="#split-to-map函数" class="header-anchor">#</a> split_to_map函数</h2> <p>split_to_map函数用于使用指定的第一个分隔符拆分字符串，然后再使用指定的第二个分隔符进行第二次拆分。</p> <div class="language-unknow extra-class"><pre class="language-text"><code>split_to_map(x, delimiter01, delimiter02)
</code></pre></div><table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td><em>x</em></td> <td>参数值为varchar类型。</td></tr> <tr><td><em>delimeter01</em></td> <td>分隔符。</td></tr> <tr><td><em>delimeter02</em></td> <td>分隔符。</td></tr></tbody></table> <p>map类型。</p> <p>使用英文逗号（,）和英文冒号（:）拆分time字段的值，返回结果为MAP类型。</p> <ul><li><p>字段样例</p> <div class="language-unknow extra-class"><pre class="language-text"><code>time:upstream_response_time:&quot;80&quot;, request_time:&quot;40&quot;
</code></pre></div></li> <li><p>查询和分析语句</p> <div class="language-unknow extra-class"><pre class="language-text"><code>* | SELECT split_to_map(time,',',':')
</code></pre></div></li> <li><p>查询和分析结果</p> <p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6096146261/p240051.png" alt="split_to_map"></p></li></ul> <h2 id="strpos函数"><a href="#strpos函数" class="header-anchor">#</a> strpos函数</h2> <p>strpos函数用于返回目标子串在字符串中的位置。与position函数等价。</p> <div class="language-unknow extra-class"><pre class="language-text"><code>strpos(x, sub_string)
</code></pre></div><table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td><em>x</em></td> <td>参数值为varchar类型。</td></tr> <tr><td><em>sub_string</em></td> <td>目标子串。</td></tr></tbody></table> <p>int类型，从1开始。</p> <p>返回字母H在server_protocol字段值中的位置。</p> <ul><li><p>查询和分析语句</p> <div class="language-unknow extra-class"><pre class="language-text"><code>* | SELECT strpos(server_protocol,'H')
</code></pre></div></li> <li><p>查询和分析结果</p> <p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3327526261/p240191.png" alt="strpos"></p></li></ul> <h2 id="substr函数"><a href="#substr函数" class="header-anchor">#</a> substr函数</h2> <p>substr函数用于返回字符串中指定位置的子串。</p> <ul><li><p>返回字符串中指定位置的子串。</p> <div class="language-unknow extra-class"><pre class="language-text"><code>substr(x, start)
</code></pre></div></li> <li><p>返回字符串中指定位置的子串，并指定子串长度。</p> <div class="language-unknow extra-class"><pre class="language-text"><code>substr(x,start,length)
</code></pre></div></li></ul> <table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td><em>x</em></td> <td>参数值为varchar类型。</td></tr> <tr><td><em>start</em></td> <td>开始提取子串的位置，从1开始。</td></tr> <tr><td><em>length</em></td> <td>子串的长度。</td></tr></tbody></table> <p>varchar类型。</p> <p>提取server_protocol字段值中的前4个字符（即HTTP部分），然后统计HTTP协议对应的请求数量。</p> <ul><li><p>字段样例</p> <div class="language-unknow extra-class"><pre class="language-text"><code>server_protocol:HTTP/2.0
</code></pre></div></li> <li><p>查询和分析语句</p> <div class="language-unknow extra-class"><pre class="language-text"><code>* | SELECT substr(server_protocol,1,4) AS protocol, count(*) AS count GROUP BY server_protocol
</code></pre></div></li> <li><p>查询和分析结果</p> <p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3327526261/p236773.png" alt="substr"></p></li></ul> <h2 id="to-utf8函数"><a href="#to-utf8函数" class="header-anchor">#</a> to_utf8函数</h2> <p>to_utf8函数用于将字符串转换为UTF-8编码格式。</p> <div class="language-unknow extra-class"><pre class="language-text"><code>to_utf8(x)
</code></pre></div><table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td><em>x</em></td> <td>参数值为varchar类型。</td></tr></tbody></table> <p>varbinary类型。</p> <p>将字符串log转换为UTF-8编码格式。</p> <ul><li><p>查询和分析语句</p> <div class="language-unknow extra-class"><pre class="language-text"><code>* | SELECT to_utf8('log')
</code></pre></div></li> <li><p>查询和分析结果</p> <p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4628540361/p313293.png" alt="to_utf8"></p></li></ul> <h2 id="trim函数"><a href="#trim函数" class="header-anchor">#</a> trim函数</h2> <p>trim函数用于删除字符串中开头和结尾的空格。</p> <div class="language-unknow extra-class"><pre class="language-text"><code>trim(x)
</code></pre></div><table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td><em>x</em></td> <td>参数值为varchar类型。</td></tr></tbody></table> <p>varchar类型。</p> <p>删除instance_id字段值的开头和结尾的空格。</p> <ul><li><p>字段样例</p> <div class="language-unknow extra-class"><pre class="language-text"><code>instance_id: i-01 
</code></pre></div></li> <li><p>查询和分析语句</p> <div class="language-unknow extra-class"><pre class="language-text"><code>* | SELECT trim(instance_id)
</code></pre></div></li> <li><p>查询和分析结果</p> <p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8495526261/p294781.png" alt="rtrim"></p></li></ul> <h2 id="upper函数"><a href="#upper函数" class="header-anchor">#</a> upper函数</h2> <p>upper函数用于将目标字符串转化为大写形式。</p> <div class="language-unknow extra-class"><pre class="language-text"><code>upper(x)
</code></pre></div><table><thead><tr><th>参数</th> <th>说明</th></tr></thead> <tbody><tr><td><em>x</em></td> <td>参数值为varchar类型。</td></tr></tbody></table> <p>varchar类型。</p> <p>将region字段值转换为大写形式。</p> <ul><li><p>字段样例</p> <div class="language-unknow extra-class"><pre class="language-text"><code>region:cn-shanghai
</code></pre></div></li> <li><p>查询和分析语句</p> <div class="language-unknow extra-class"><pre class="language-text"><code>* | SELECT upper(region)
</code></pre></div></li> <li><p>查询和分析结果</p> <p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8495526261/p294437.png" alt="upper函数"></p></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vuepress-test-blog/sqlfun/1聚合函数.html" class="prev">
        聚合函数
      </a></span> <span class="next"><a href="/vuepress-test-blog/sqlfun/3日期和时间函数.html">
        日期和时间函数
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/vuepress-test-blog/assets/js/app.1b4f8edd.js" defer></script><script src="/vuepress-test-blog/assets/js/2.bce32082.js" defer></script><script src="/vuepress-test-blog/assets/js/14.c16a383d.js" defer></script>
  </body>
</html>
