(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{491:function(t,_,a){"use strict";a.r(_);var e=a(94),v=Object(e.a)({},(function(){var t=this,_=t._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"日期和时间函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#日期和时间函数"}},[t._v("#")]),t._v(" 日期和时间函数")]),t._v(" "),_("p",[t._v("日志服务提供时间函数、日期函数、时间截断函数、时间间隔函数和时序补全函数，支持对日志中的日期和时间进行格式转换，分组聚合等处理。本文介绍日期和时间函数的基本语法及示例。")]),t._v(" "),_("h1",{attrs:{id:"函数示例"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#函数示例"}},[t._v("#")]),t._v(" 函数示例")]),t._v(" "),_("p",[t._v("日志服务支持如下日期和时间函数。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("日志服务中的日志时间戳精确到秒，所以配置时间格式（"),_("a",{attrs:{href:"#LogService-user-guide-0110/section-8g8-2xm-kdv"}},[t._v("format")]),t._v("）时，只需配置到秒，无需配置毫秒、微秒等信息。")])]),t._v(" "),_("li",[_("p",[t._v("只需为时间字符串中的时间部分配置时间格式（"),_("a",{attrs:{href:"#LogService-user-guide-0110/section-8g8-2xm-kdv"}},[t._v("format")]),t._v("），其他内容（例如时区）无需配置时间格式。")])]),t._v(" "),_("li",[_("p",[t._v("日志服务中的每条日志都包含保留字段__time__，该字段的值为UNIX时间戳格式，例如1592374067，代表2020-06-17 14:07:47。")])]),t._v(" "),_("li",[_("p",[t._v("在日志服务分析语句中，表示字符串的字符必须使用单引号（''）包裹，无符号包裹或被双引号（\"\"）包裹的字符表示字段名或列名。例如：'status'表示字符串status，status或\"status\"表示日志字段status。")])])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("函数类型")]),t._v(" "),_("th",[t._v("函数名称")]),t._v(" "),_("th",[t._v("语法")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("日期和时间函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#current_date%E5%87%BD%E6%95%B0"}},[t._v("current_date函数")])]),t._v(" "),_("td",[t._v("current_date")]),t._v(" "),_("td",[t._v("返回当前日期。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#current_time%E5%87%BD%E6%95%B0"}},[t._v("current_time函数")])]),t._v(" "),_("td",[t._v("current_time")]),t._v(" "),_("td",[t._v("返回当前时间和时区。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#current_timestamp%E5%87%BD%E6%95%B0"}},[t._v("current_timestamp函数")])]),t._v(" "),_("td",[t._v("current_timestamp")]),t._v(" "),_("td",[t._v("返回当前日期、时间和时区。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#current_timezone%E5%87%BD%E6%95%B0"}},[t._v("current_timezone函数")])]),t._v(" "),_("td",[t._v("current_timezone()")]),t._v(" "),_("td",[t._v("返回当前时区。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#date%E5%87%BD%E6%95%B0"}},[t._v("date函数")])]),t._v(" "),_("td",[t._v("date( "),_("em",[t._v("x")]),t._v(" )")]),t._v(" "),_("td",[t._v("返回日期和时间表达式中的日期部分。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#date_format%E5%87%BD%E6%95%B0"}},[t._v("date_format函数")])]),t._v(" "),_("td",[t._v("date_format( "),_("em",[t._v("x")]),t._v(" , "),_("em",[t._v("format")]),t._v(" )")]),t._v(" "),_("td",[t._v("将timestamp类型的日期和时间表达式转化为指定格式的日期和时间表达式。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#date_parse%E5%87%BD%E6%95%B0"}},[t._v("date_parse函数")])]),t._v(" "),_("td",[t._v("date_parse( "),_("em",[t._v("x")]),t._v(" , "),_("em",[t._v("format")]),t._v(" )")]),t._v(" "),_("td",[t._v("将日期和时间字符串转换为指定格式的timestamp类型的日期和时间表达式。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#from_iso8601_date%E5%87%BD%E6%95%B0"}},[t._v("from_iso8601_date函数")])]),t._v(" "),_("td",[t._v("from_iso8601_date( "),_("em",[t._v("x")]),t._v(" )")]),t._v(" "),_("td",[t._v("将ISO8601格式的日期表达式转化为date类型的日期表达式。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#from_iso8601_timestamp%E5%87%BD%E6%95%B0"}},[t._v("from_iso8601_timestamp函数")])]),t._v(" "),_("td",[t._v("from_iso8601_timestamp( "),_("em",[t._v("x")]),t._v(" )")]),t._v(" "),_("td",[t._v("将ISO8601格式的日期和时间表达式转化为timestamp类型的日期和时间表达式。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#from_unixtime%E5%87%BD%E6%95%B0"}},[t._v("from_unixtime函数")])]),t._v(" "),_("td",[t._v("from_unixtime( "),_("em",[t._v("x")]),t._v(" )")]),t._v(" "),_("td",[t._v("将UNIX时间戳转化为无时区的timestamp类型的日期和时间表达式。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#from_unixtime%E5%87%BD%E6%95%B0"}},[t._v("from_unixtime函数")])]),t._v(" "),_("td",[t._v("from_unixtime( "),_("em",[t._v("x")]),t._v(" , "),_("em",[t._v("time zone")]),t._v(" )")]),t._v(" "),_("td",[t._v("将UNIX时间戳转化为带时区的timestamp类型的日期和时间表达式。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#from_unixtime%E5%87%BD%E6%95%B0"}},[t._v("from_unixtime函数")])]),t._v(" "),_("td",[t._v("from_unixtime( "),_("em",[t._v("x")]),t._v(" , "),_("em",[t._v("hours")]),t._v(" , "),_("em",[t._v("minutes")]),t._v(" )")]),t._v(" "),_("td",[t._v("将UNIX时间戳转化为带时区的timestamp类型的日期和时间表达式，其中 "),_("em",[t._v("hours")]),t._v(" 和 "),_("em",[t._v("minutes")]),t._v(" 为时区偏移量。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#localtime%E5%87%BD%E6%95%B0"}},[t._v("localtime函数")])]),t._v(" "),_("td",[t._v("localtime")]),t._v(" "),_("td",[t._v("返回本地时间。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#localtimestamp%E5%87%BD%E6%95%B0"}},[t._v("localtimestamp函数")])]),t._v(" "),_("td",[t._v("localtimestamp")]),t._v(" "),_("td",[t._v("返回本地日期和时间。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#now%E5%87%BD%E6%95%B0"}},[t._v("now函数")])]),t._v(" "),_("td",[t._v("now()")]),t._v(" "),_("td",[t._v("返回当前日期和时间。 now函数等同于current_timestamp函数。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#to_iso8601%E5%87%BD%E6%95%B0"}},[t._v("to_iso8601函数")])]),t._v(" "),_("td",[t._v("to_iso8601( "),_("em",[t._v("x")]),t._v(" )")]),t._v(" "),_("td",[t._v("将date类型或timestamp类型的日期和时间表达式转换为ISO8601格式的日期和时间表达式。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#to_unixtime%E5%87%BD%E6%95%B0"}},[t._v("to_unixtime函数")])]),t._v(" "),_("td",[t._v("to_unixtime( "),_("em",[t._v("x")]),t._v(" )")]),t._v(" "),_("td",[t._v("将timestamp类型的日期和时间表达式转化成UNIX时间戳。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间提取函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#day%E5%87%BD%E6%95%B0"}},[t._v("day函数")])]),t._v(" "),_("td",[t._v("day( "),_("em",[t._v("x")]),t._v(" )")]),t._v(" "),_("td",[t._v("提取日期和时间表达式中的天数，按月计算。 day函数等同于day_of_month函数。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间提取函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#day_of_month%E5%87%BD%E6%95%B0"}},[t._v("day_of_month函数")])]),t._v(" "),_("td",[t._v("day_of_month( "),_("em",[t._v("x")]),t._v(" )")]),t._v(" "),_("td",[t._v("提取日期和时间表达式中的天数，按月计算。 day_of_month函数等同于day函数。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间提取函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#day_of_week%E5%87%BD%E6%95%B0"}},[t._v("day_of_week函数")])]),t._v(" "),_("td",[t._v("day_of_week( "),_("em",[t._v("x")]),t._v(" )")]),t._v(" "),_("td",[t._v("提取日期和时间表达式中的天数，按周计算。 day_of_week函数等同于dow函数。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间提取函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#day_of_year%E5%87%BD%E6%95%B0"}},[t._v("day_of_year函数")])]),t._v(" "),_("td",[t._v("day_of_year( "),_("em",[t._v("x")]),t._v(" )")]),t._v(" "),_("td",[t._v("提取日期和时间表达式中的天数，按年计算。 day_of_year函数等同于doy函数。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间提取函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#dow%E5%87%BD%E6%95%B0"}},[t._v("dow函数")])]),t._v(" "),_("td",[t._v("dow( "),_("em",[t._v("x")]),t._v(" )")]),t._v(" "),_("td",[t._v("提取日期和时间表达式中的天数，按周计算。 dow函数等同于day_of_week函数。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间提取函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#doy%E5%87%BD%E6%95%B0"}},[t._v("doy函数")])]),t._v(" "),_("td",[t._v("doy( "),_("em",[t._v("x")]),t._v(" )")]),t._v(" "),_("td",[t._v("提取日期和时间表达式中的天数，按年计算。 doy函数等同于day_of_year函数。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间提取函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#extract%E5%87%BD%E6%95%B0"}},[t._v("extract函数")])]),t._v(" "),_("td",[t._v("extract( "),_("em",[t._v("field")]),t._v(" from "),_("em",[t._v("x")]),t._v(" )")]),t._v(" "),_("td",[t._v("通过指定的 "),_("em",[t._v("field")]),t._v(" ，提取日期和时间表达式中的日期或时间部分。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间提取函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#hour%E5%87%BD%E6%95%B0"}},[t._v("hour函数")])]),t._v(" "),_("td",[t._v("hour( "),_("em",[t._v("x")]),t._v(" )")]),t._v(" "),_("td",[t._v("提取日期和时间表达式中的小时数，按24小时制计算。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间提取函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#minute%E5%87%BD%E6%95%B0"}},[t._v("minute函数")])]),t._v(" "),_("td",[t._v("minute( "),_("em",[t._v("x")]),t._v(" )")]),t._v(" "),_("td",[t._v("提取日期和时间表达式中的分钟数。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间提取函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#month%E5%87%BD%E6%95%B0"}},[t._v("month函数")])]),t._v(" "),_("td",[t._v("month( "),_("em",[t._v("x")]),t._v(" )")]),t._v(" "),_("td",[t._v("提取日期和时间表达式中的月份。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间提取函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#quarter%E5%87%BD%E6%95%B0"}},[t._v("quarter函数")])]),t._v(" "),_("td",[t._v("quarter( "),_("em",[t._v("x")]),t._v(" )")]),t._v(" "),_("td",[t._v("计算目标日期所属的季度。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间提取函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#second%E5%87%BD%E6%95%B0"}},[t._v("second函数")])]),t._v(" "),_("td",[t._v("second( "),_("em",[t._v("x")]),t._v(" )")]),t._v(" "),_("td",[t._v("提取日期和时间表达式中的秒数。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间提取函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#timezone_hour%E5%87%BD%E6%95%B0"}},[t._v("timezone_hour函数")])]),t._v(" "),_("td",[t._v("timezone_hour( "),_("em",[t._v("x")]),t._v(" )")]),t._v(" "),_("td",[t._v("计算时区的小时偏移量。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间提取函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#timezone_minute%E5%87%BD%E6%95%B0"}},[t._v("timezone_minute函数")])]),t._v(" "),_("td",[t._v("timezone_minute( "),_("em",[t._v("x")]),t._v(" )")]),t._v(" "),_("td",[t._v("计算时区的分钟偏移量。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间提取函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#week%E5%87%BD%E6%95%B0"}},[t._v("week函数")])]),t._v(" "),_("td",[t._v("week( "),_("em",[t._v("x")]),t._v(" )")]),t._v(" "),_("td",[t._v("计算目标日期是在一年中的第几周。 week函数等同于week_of_year函数。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间提取函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#week_of_year%E5%87%BD%E6%95%B0"}},[t._v("week_of_year函数")])]),t._v(" "),_("td",[t._v("week_of_year( "),_("em",[t._v("x")]),t._v(" )")]),t._v(" "),_("td",[t._v("计算目标日期是在一年中的第几周。 week_of_year函数等同于week函数。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间提取函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#year%E5%87%BD%E6%95%B0"}},[t._v("year函数")])]),t._v(" "),_("td",[t._v("year( "),_("em",[t._v("x")]),t._v(" )")]),t._v(" "),_("td",[t._v("提取目标日期中的年份。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间提取函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#year_of_week%E5%87%BD%E6%95%B0"}},[t._v("year_of_week函数")])]),t._v(" "),_("td",[t._v("year_of_week( "),_("em",[t._v("x")]),t._v(" )")]),t._v(" "),_("td",[t._v("提取目标日期在ISO周日历中的年份。 year_of_week函数等同于yow函数。")])]),t._v(" "),_("tr",[_("td",[t._v("日期和时间提取函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#yow%E5%87%BD%E6%95%B0"}},[t._v("yow函数")])]),t._v(" "),_("td",[t._v("yow( "),_("em",[t._v("x")]),t._v(" )")]),t._v(" "),_("td",[t._v("提取目标日期在ISO周日历中的年份。 yow函数等同于year_of_week函数。")])]),t._v(" "),_("tr",[_("td",[t._v("时间间隔函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#date_trunc%E5%87%BD%E6%95%B0"}},[t._v("date_trunc函数")])]),t._v(" "),_("td",[t._v("date_trunc(unit, "),_("em",[t._v("x")]),t._v(" )")]),t._v(" "),_("td",[t._v("根据您指定的时间单位截断日期和时间表达式，并按照毫秒、秒、分钟，小时、日、月或年对齐。")])]),t._v(" "),_("tr",[_("td",[t._v("时间间隔函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#date_add%E5%87%BD%E6%95%B0"}},[t._v("date_add函数")])]),t._v(" "),_("td",[t._v("date_add( "),_("em",[t._v("unit")]),t._v(" , "),_("em",[t._v("N")]),t._v(" , "),_("em",[t._v("x")]),t._v(" )")]),t._v(" "),_("td",[t._v("在 "),_("em",[t._v("x")]),t._v(" 上加上N个时间单位（unit）。")])]),t._v(" "),_("tr",[_("td",[t._v("时间间隔函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#date_diff%E5%87%BD%E6%95%B0"}},[t._v("date_diff函数")])]),t._v(" "),_("td",[t._v("date_diff( "),_("em",[t._v("unit")]),t._v(" , "),_("em",[t._v("x")]),t._v(" , "),_("em",[t._v("y")]),t._v(" )")]),t._v(" "),_("td",[t._v("返回两个时间表达式之间的时间差值，例如计算 "),_("em",[t._v("x")]),t._v(" 和 "),_("em",[t._v("y")]),t._v(" 之间相差几个时间单位（unit）。")])]),t._v(" "),_("tr",[_("td",[t._v("时序补全函数")]),t._v(" "),_("td",[_("a",{attrs:{href:"#time_series%E5%87%BD%E6%95%B0"}},[t._v("time_series函数")])]),t._v(" "),_("td",[t._v("time_series( "),_("em",[t._v("x")]),t._v(" , "),_("em",[t._v("window")]),t._v(" , "),_("em",[t._v("format")]),t._v(" , "),_("em",[t._v("padding_data")]),t._v(" )")]),t._v(" "),_("td",[t._v("补全您查询时间窗口内缺失的数据。")])])])]),t._v(" "),_("h1",{attrs:{id:"案例"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#案例"}},[t._v("#")]),t._v(" 案例")]),t._v(" "),_("h2",{attrs:{id:"current-date函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#current-date函数"}},[t._v("#")]),t._v(" current_date函数")]),t._v(" "),_("p",[t._v("current_date函数用于返回当前日期，格式为YYYY-MM-DD。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("current_date\n")])])]),_("p",[t._v("date类型。")]),t._v(" "),_("p",[t._v("查询昨天的日志。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* |\nSELECT\n  *\nFROM  log\nWHERE\n  __time__ < to_unixtime(current_date)\n  AND __time__ > to_unixtime(date_add('day', -1, current_date))\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6632296261/p295473.png",alt:"current_date"}})])])]),t._v(" "),_("h2",{attrs:{id:"current-time函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#current-time函数"}},[t._v("#")]),t._v(" current_time函数")]),t._v(" "),_("p",[t._v("current_time函数用于返回当前时间和时区，格式为HH:MM:SS.Ms Time_zone。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("current_time\n")])])]),_("p",[t._v("time类型。")]),t._v(" "),_("p",[t._v("查询当前时间和时区。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* | select current_time\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3049136261/p294652.png",alt:"current_time"}})])])]),t._v(" "),_("h2",{attrs:{id:"current-timestamp函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#current-timestamp函数"}},[t._v("#")]),t._v(" current_timestamp函数")]),t._v(" "),_("p",[t._v("current_timestamp函数用于返回当前日期、时间和时区，格式为YYYY-MM-DD HH:MM:SS.Ms Time_zone。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("current_timestamp\n")])])]),_("p",[t._v("timestamp类型。")]),t._v(" "),_("p",[t._v("查询昨天的日志。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* |\nSELECT\n  *\nFROM  log\nWHERE\n  __time__ < to_unixtime(current_timestamp)\n  AND __time__ > to_unixtime(date_add('day', -1, current_timestamp))\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6632296261/p295473.png",alt:"current_date"}})])])]),t._v(" "),_("h2",{attrs:{id:"current-timezone函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#current-timezone函数"}},[t._v("#")]),t._v(" current_timezone函数")]),t._v(" "),_("p",[t._v("current_timezone函数用于返回当前时区。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("current_timezone()\n")])])]),_("p",[t._v("varchar类型。")]),t._v(" "),_("p",[t._v("查询当前的时区。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* | select current_timezone()\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3049136261/p294665.png",alt:"current_timezone"}})])])]),t._v(" "),_("h2",{attrs:{id:"date函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#date函数"}},[t._v("#")]),t._v(" date函数")]),t._v(" "),_("p",[t._v("date函数用于提取日期和时间表达式中的日期部分。date函数等同于"),_("code",[t._v("cast(")]),t._v(" "),_("em",[t._v("x")]),_("code",[t._v("as date)")]),t._v("。更多信息，请参见"),_("RouterLink",{attrs:{to:"/sqlfun/t13115.html#concept-v55-4lq-zdb"}},[t._v("类型转换函数")]),t._v("。")],1),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("date(x)\n")])])]),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("参数值为date、timestamp类型。")])])])]),t._v(" "),_("p",[t._v("date类型。")]),t._v(" "),_("p",[t._v("使用current_timestamp函数获取当前日期和时间，然后使用date函数提取日期部分。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* | SELECT current_timestamp, date(current_timestamp)\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7631001361/p319524.png",alt:"date"}})])])]),t._v(" "),_("h2",{attrs:{id:"date-format函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#date-format函数"}},[t._v("#")]),t._v(" date_format函数")]),t._v(" "),_("p",[t._v("date_format函数用于将timestamp类型的日期和时间表达式转换为指定格式的日期和时间字符串。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("date_format(x, format)\n")])])]),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("参数值为timestamp类型的日期和时间表达式。")])]),t._v(" "),_("tr",[_("td",[_("em",[t._v("format")])]),t._v(" "),_("td",[t._v("日期和时间表达式的转换格式。更多信息，请参见"),_("a",{attrs:{href:"#LogService-user-guide-0110/section-8g8-2xm-kdv"}},[t._v("format说明")]),t._v("。")])])])]),t._v(" "),_("p",[t._v("varchar类型。")]),t._v(" "),_("p",[t._v("计算Nginx请求状态及数量，并根据时间顺序展示。首先通过date_trunc函数将日志时间按照分钟对齐，再使用date_format函数转换为"),_("code",[t._v("%H:%i")]),t._v("格式，然后计算每分钟内每个状态码对应的请求数量，并以流图展示查询和分析结果。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* |\nSELECT\n  date_format(date_trunc('minute', __time__), '%H:%i') AS time,\n  COUNT(1) AS count,\n  status\nGROUP BY\n  time,\n  status\nORDER BY\n  time\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7632296261/p296431.png",alt:"date_format"}})])])]),t._v(" "),_("h2",{attrs:{id:"date-parse函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#date-parse函数"}},[t._v("#")]),t._v(" date_parse函数")]),t._v(" "),_("p",[t._v("date_parse函数用于将日期和时间字符串转换为指定格式的timestamp类型的日期和时间表达式。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("date_parse(x, format)\n")])])]),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("参数值为日期和时间字符串。")])]),t._v(" "),_("tr",[_("td",[_("em",[t._v("format")])]),t._v(" "),_("td",[t._v("日期和时间表达式的转换格式。更多信息，请参见"),_("a",{attrs:{href:"#LogService-user-guide-0110/section-8g8-2xm-kdv"}},[t._v("format说明")]),t._v("。")])])])]),t._v(" "),_("p",[t._v("timestamp类型。")]),t._v(" "),_("p",[t._v("将StartTime字段值和EndTime字段值转换为timestamp类型，并计算两者的时间差。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("*|\nSELECT\n    date_parse(StartTime, '%Y-%m-%d %H:%i') AS \"StartTime\",\n    date_parse(EndTime, '%Y-%m-%d %H:%i') AS \"EndTime\",\n    date_diff('hour', StartTime, EndTime) AS \"时间差(小时)\"\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7632296261/p297055.png",alt:" date_parse("}})])])]),t._v(" "),_("h2",{attrs:{id:"from-iso8601-date函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#from-iso8601-date函数"}},[t._v("#")]),t._v(" from_iso8601_date函数")]),t._v(" "),_("p",[t._v("from_iso8601_date函数用于将ISO8601格式的日期表达式转化为date类型的日期表达式，格式为YYYY-MM-DD。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("from_iso8601_date(x)\n")])])]),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("参数值为ISO8601格式的日期表达式。")])])])]),t._v(" "),_("p",[t._v("date类型。")]),t._v(" "),_("p",[t._v("将time字段的值转换为date类型的日期表达式。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("字段样例")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("time:2020-05-03\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* | select from_iso8601_date(time)\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6632296261/p296884.png",alt:"from_iso8601_date"}})])])]),t._v(" "),_("h2",{attrs:{id:"from-iso8601-timestamp函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#from-iso8601-timestamp函数"}},[t._v("#")]),t._v(" from_iso8601_timestamp函数")]),t._v(" "),_("p",[t._v("from_iso8601_timestamp函数用于将ISO8601格式的日期和时间表达式转化为timestamp类型的日期和时间表达式，格式为YYYY-MM-DD HH:MM:SS.Ms Time_zone。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("from_iso8601_timestamp(x)\n")])])]),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("参数值为ISO8601格式的日期和时间表达式。")])])])]),t._v(" "),_("p",[t._v("timestamp类型。")]),t._v(" "),_("p",[t._v("将time字段的值转换为timestamp类型的日期和时间表达式。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("字段样例")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("time:2020-05-03T17:30:08\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* | select from_iso8601_timestamp(time)\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6632296261/p296867.png",alt:"from_iso8601_timestamp"}})])])]),t._v(" "),_("h2",{attrs:{id:"from-unixtime函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#from-unixtime函数"}},[t._v("#")]),t._v(" from_unixtime函数")]),t._v(" "),_("p",[t._v("from_unixtime函数用于将UNIX时间戳转化为timestamp类型的日期和时间表达式，格式为YYYY-MM-DD HH:MM:SS.Ms或YYYY-MM-DD HH:MM:SS.Ms Time_zone。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("转化为无时区的timestamp类型的日期和时间表达式")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("from_unixtime(x)\n")])])])]),t._v(" "),_("li",[_("p",[t._v("转化为带时区的timestamp类型的日期和时间表达式")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("from_unixtime(x,time zone)\n")])])])]),t._v(" "),_("li",[_("p",[t._v("转化为带时区的timestamp类型的日期和时间表达式，其中 "),_("em",[t._v("hours")]),t._v(" 和 "),_("em",[t._v("minutes")]),t._v(" 为时区偏移量。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("from_unixtime(x, hours, minutes)\n")])])])])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("参数值为UNIX时间戳。")])]),t._v(" "),_("tr",[_("td",[_("em",[t._v("time zone")])]),t._v(" "),_("td",[t._v("时区，例如Asia/shanghai。")])]),t._v(" "),_("tr",[_("td",[_("em",[t._v("hours")])]),t._v(" "),_("td",[t._v("时区的小时偏移量，例如+07、-09")])]),t._v(" "),_("tr",[_("td",[_("em",[t._v("minutes")])]),t._v(" "),_("td",[t._v("时区的分钟偏移量，例如+30、-45。")])])])]),t._v(" "),_("p",[t._v("timestamp类型。")]),t._v(" "),_("p",[t._v("将time字段的值转化为带时区的timestamp类型的日期和时间表达式。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("字段样例")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("time:1626774758\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* | select from_unixtime(time,'Asia/shanghai')\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6632296261/p296879.png",alt:"from_unixtime"}})])])]),t._v(" "),_("h2",{attrs:{id:"localtime函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#localtime函数"}},[t._v("#")]),t._v(" localtime函数")]),t._v(" "),_("p",[t._v("localtime函数用于返回本地时间，格式为HH:MM:SS.Ms。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("localtime\n")])])]),_("p",[t._v("time类型。")]),t._v(" "),_("p",[t._v("查询本地时间。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* | select localtime\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6632296261/p296880.png",alt:"localtime"}})])])]),t._v(" "),_("h2",{attrs:{id:"localtimestamp函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#localtimestamp函数"}},[t._v("#")]),t._v(" localtimestamp函数")]),t._v(" "),_("p",[t._v("localtimestamp函数用于返回本地的日期和时间，格式为YYYY-MM-DD HH:MM:SS.Ms Time_zone。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("localtimestamp\n")])])]),_("p",[t._v("timestamp类型。")]),t._v(" "),_("p",[t._v("查询昨天的日志。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* |\nSELECT\n  *\nFROM  log\nWHERE\n  __time__ < to_unixtime(localtimestamp)\n  AND __time__ > to_unixtime(date_add('day', -1, localtimestamp))\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6632296261/p295473.png",alt:"current_date"}})])])]),t._v(" "),_("h2",{attrs:{id:"now函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#now函数"}},[t._v("#")]),t._v(" now函数")]),t._v(" "),_("p",[t._v("now函数用于返回当前日期和时间，格式为YYYY-MM-DD HH:MM:SS.Ms Time_zone。now函数等同于current_timestamp函数。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("now()\n")])])]),_("p",[t._v("timestamp类型。")]),t._v(" "),_("p",[t._v("查询昨天的日志。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* |\nSELECT\n  *\nFROM  log\nWHERE\n  __time__ < to_unixtime(now())\n  AND __time__ > to_unixtime(date_add('day', -1, now()))\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6632296261/p295473.png",alt:"current_date"}})])])]),t._v(" "),_("h2",{attrs:{id:"to-iso8601函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#to-iso8601函数"}},[t._v("#")]),t._v(" to_iso8601函数")]),t._v(" "),_("p",[t._v("to_iso8601函数用于将date类型或timestamp类型的日期和时间表达式转换为ISO8601格式的日期和时间表达式。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("to_iso8601(x)\n")])])]),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("参数值为date、timestamp类型。")])])])]),t._v(" "),_("p",[t._v("varchar类型。")]),t._v(" "),_("p",[t._v("使用current_timestamp函数获取当前日期和时间，然后使用to_iso8601函数将当前的日期和时间表达式转换为ISO8601格式的日期和时间表达式。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* | select to_iso8601(current_timestamp) AS ISO8601\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5075980361/p319567.png",alt:"to_iso8601"}})])])]),t._v(" "),_("h2",{attrs:{id:"to-unixtime函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#to-unixtime函数"}},[t._v("#")]),t._v(" to_unixtime函数")]),t._v(" "),_("p",[t._v("to_unixtime函数用于将timestamp类型的日期和时间表达式转化成UNIX时间戳。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("to_unixtime(x)\n")])])]),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("参数值为timestamp类型的日期和时间表达式。")])])])]),t._v(" "),_("p",[t._v("double类型。")]),t._v(" "),_("p",[t._v("查询昨天的日志。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* |\nSELECT\n  *\nFROM  log\nWHERE\n  __time__ < to_unixtime(now())\n  AND __time__ > to_unixtime(date_add('day', -1, now()))\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6632296261/p295473.png",alt:"current_date"}})])])]),t._v(" "),_("h2",{attrs:{id:"day函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#day函数"}},[t._v("#")]),t._v(" day函数")]),t._v(" "),_("p",[t._v("day函数用于提取日期和时间表达式中的天数，按月计算。day函数等同于day_of_month函数。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("day(x)\n")])])]),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("参数值为timestamp、date类型。")])])])]),t._v(" "),_("p",[t._v("bigint类型。")]),t._v(" "),_("p",[t._v("使用current_date函数获取当前日期，然后使用day函数提取当前日期为本月的第几天。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* | SELECT current_date, day(current_date)\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6932890361/p319585.png",alt:"day"}})])])]),t._v(" "),_("h2",{attrs:{id:"day-of-month函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#day-of-month函数"}},[t._v("#")]),t._v(" day_of_month函数")]),t._v(" "),_("p",[t._v("day_of_month函数用于提取日期和时间表达式中的天数，按月计算。day_of_month函数等同于day函数。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("day_of_month(x)\n")])])]),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("参数值为timestamp、date类型。")])])])]),t._v(" "),_("p",[t._v("bigint类型。")]),t._v(" "),_("p",[t._v("使用current_date函数获取当前日期，然后使用day_of_month函数提取当前日期为本月的第几天。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* | SELECT current_date, day_of_month(current_date)\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6932890361/p319585.png",alt:"day"}})])])]),t._v(" "),_("h2",{attrs:{id:"day-of-week函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#day-of-week函数"}},[t._v("#")]),t._v(" day_of_week函数")]),t._v(" "),_("p",[t._v("day_of_week函数用于提取日期和时间表达式中的天数，按周计算。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("day_of_week(x)\n")])])]),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("参数值为timestamp、date类型。")])])])]),t._v(" "),_("p",[t._v("bigint类型。")]),t._v(" "),_("p",[t._v("使用current_date函数获取当前日期，然后使用day_of_week函数提取当前日期为本周的第几天。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* | SELECT current_date, day_of_week(current_date)\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6932890361/p324130.png",alt:"day_of_week"}})])])]),t._v(" "),_("h2",{attrs:{id:"day-of-year函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#day-of-year函数"}},[t._v("#")]),t._v(" day_of_year函数")]),t._v(" "),_("p",[t._v("day_of_year函数用于提取日期和时间表达式中的天数，按年计算。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("day_of_year(x)\n")])])]),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("参数值为timestamp、date类型。")])])])]),t._v(" "),_("p",[t._v("bigint类型。")]),t._v(" "),_("p",[t._v("使用current_date函数获取当前日期，然后使用day_of_year函数提取当前日期为本年的第几天。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* | SELECT current_date, day_of_year(current_date)\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3856990361/p324135.png",alt:"day_of_year"}})])])]),t._v(" "),_("h2",{attrs:{id:"dow函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#dow函数"}},[t._v("#")]),t._v(" dow函数")]),t._v(" "),_("p",[t._v("dow函数用于提取日期和时间表达式中的天数，按周计算。dow函数等同于day_of_week函数。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("dow(x)\n")])])]),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("参数值为timestamp、date类型。")])])])]),t._v(" "),_("p",[t._v("bigint类型。")]),t._v(" "),_("p",[t._v("使用current_date函数获取当前日期，然后使用dow函数提取当前日期为本周的第几天。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* | SELECT current_date, dow(current_date)\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6932890361/p324130.png",alt:"day_of_week"}})])])]),t._v(" "),_("h2",{attrs:{id:"doy函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#doy函数"}},[t._v("#")]),t._v(" doy函数")]),t._v(" "),_("p",[t._v("doy函数用于提取日期和时间表达式中的天数，按年计算。doy函数等同于day_of_year函数。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("doy(x)\n")])])]),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("参数值为timestamp、date类型。")])])])]),t._v(" "),_("p",[t._v("bigint类型。")]),t._v(" "),_("p",[t._v("使用current_date函数获取当前日期，然后使用doy函数提取当前日期为本年的第几天。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* | SELECT current_date, doy(current_date)\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3856990361/p324135.png",alt:"day_of_year"}})])])]),t._v(" "),_("h2",{attrs:{id:"extract函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#extract函数"}},[t._v("#")]),t._v(" extract函数")]),t._v(" "),_("p",[t._v("extract函数通过指定的 "),_("em",[t._v("field")]),t._v(" ，提取日期和时间表达式中的日期或时间部分。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("extract(field from x)\n")])])]),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("field")])]),t._v(" "),_("td",[t._v("取值为year、quarter、month、week、day、day_of_month、day_of_week、dow、day_of_year、doy、year_of_week、yow、hour、minute、second、timezone_hour、timezone_minute。")])]),t._v(" "),_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("参数值为date、time、timestamp、interval (actual varchar(9)) 类型。")])])])]),t._v(" "),_("p",[t._v("bigint类型。")]),t._v(" "),_("p",[t._v("使用current_date函数获取当前日期，然后使用extract函数提取当前日期中的年份。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* | SELECT extract(year from current_date)\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3856990361/p324242.png",alt:"extract"}})])])]),t._v(" "),_("h2",{attrs:{id:"hour函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#hour函数"}},[t._v("#")]),t._v(" hour函数")]),t._v(" "),_("p",[t._v("hour函数用于提取日期和时间表达式中的小时数，按24小时制计算。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("hour(x)\n")])])]),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("参数值为timestamp类型。")])])])]),t._v(" "),_("p",[t._v("bigint类型。")]),t._v(" "),_("p",[t._v("使用current_timestamp函数获取当前日期和时间，然后使用hour函数提取当前时间的小时数。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* | SELECT current_timestamp, hour(current_timestamp)\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3856990361/p324157.png",alt:"hour"}})])])]),t._v(" "),_("h2",{attrs:{id:"minute函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#minute函数"}},[t._v("#")]),t._v(" minute函数")]),t._v(" "),_("p",[t._v("minute函数用于提取日期和时间表达式中的分钟数。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("minute(x)\n")])])]),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("参数值为timestamp类型。")])])])]),t._v(" "),_("p",[t._v("bigint类型。")]),t._v(" "),_("p",[t._v("使用current_timestamp函数获取当前日期和时间，然后使用minute函数提取当前时间的分钟数。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* | SELECT current_timestamp, minute(current_timestamp)\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3856990361/p324178.png",alt:"minute"}})])])]),t._v(" "),_("h2",{attrs:{id:"month函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#month函数"}},[t._v("#")]),t._v(" month函数")]),t._v(" "),_("p",[t._v("month函数用于提取日期和时间表达式中的月份。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("month(x)\n")])])]),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("参数值为date、timestamp类型。")])])])]),t._v(" "),_("p",[t._v("bigint类型。")]),t._v(" "),_("p",[t._v("使用current_timestamp函数获取当前日期和时间，然后使用month函数提取当前日期所属的月份。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* | SELECT current_timestamp, month(current_timestamp)\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3856990361/p324172.png",alt:"month"}})])])]),t._v(" "),_("h2",{attrs:{id:"quarter函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#quarter函数"}},[t._v("#")]),t._v(" quarter函数")]),t._v(" "),_("p",[t._v("quarter函数用于返回日期所属的季度。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("quarter(x)\n")])])]),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("参数值为date、timestamp类型。")])])])]),t._v(" "),_("p",[t._v("bigint类型。")]),t._v(" "),_("p",[t._v("使用current_timestamp函数获取当前日期和时间，然后使用quarter函数计算当前日期所属的季度。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* | SELECT current_timestamp,quarter(current_timestamp)\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4856990361/p324189.png",alt:"quarter"}})])])]),t._v(" "),_("h2",{attrs:{id:"second函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#second函数"}},[t._v("#")]),t._v(" second函数")]),t._v(" "),_("p",[t._v("second函数用于提取日期和时间表达式中的秒数。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("second(x)\n")])])]),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("参数值为timestamp类型。")])])])]),t._v(" "),_("p",[t._v("bigint类型。")]),t._v(" "),_("p",[t._v("使用current_timestamp函数获取当前日期和时间，然后使用second函数提取当前时间的秒数。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* | SELECT current_timestamp,second(current_timestamp)\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4856990361/p324199.png",alt:"second"}})])])]),t._v(" "),_("h2",{attrs:{id:"timezone-hour函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#timezone-hour函数"}},[t._v("#")]),t._v(" timezone_hour函数")]),t._v(" "),_("p",[t._v("timezone_hour函数用于计算时区的小时偏移量。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("timezone_hour(x)\n")])])]),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("参数值为timestamp类型。")])])])]),t._v(" "),_("p",[t._v("bigint类型。")]),t._v(" "),_("p",[t._v("使用current_timestamp函数获取当前日期和时间，然后使用timezone_hour函数计算当前时间所属时区的小时偏移量。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* | SELECT current_timestamp, timezone_hour(current_timestamp)\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4856990361/p324206.png",alt:"timezone_hour"}})])])]),t._v(" "),_("h2",{attrs:{id:"timezone-minute函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#timezone-minute函数"}},[t._v("#")]),t._v(" timezone_minute函数")]),t._v(" "),_("p",[t._v("timezone_minute函数用于计算时区的分钟偏移量。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("timezone_minute(x)\n")])])]),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("参数值为timestamp类型。")])])])]),t._v(" "),_("p",[t._v("bigint类型。")]),t._v(" "),_("p",[t._v("使用current_timestamp函数获取当前日期和时间，然后使用timezone_minute函数计算当前时间所属时区的分钟偏移量。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* | SELECT current_timestamp,timezone_minute(current_timestamp)\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4856990361/p324211.png",alt:"timezone_minute"}})])])]),t._v(" "),_("h2",{attrs:{id:"week函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#week函数"}},[t._v("#")]),t._v(" week函数")]),t._v(" "),_("p",[t._v("week函数用于计算目标日期是在一年中的第几周。week函数等同于week_of_year函数。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("week(x)\n")])])]),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("参数值为date、timestamp类型。")])])])]),t._v(" "),_("p",[t._v("bigint类型。")]),t._v(" "),_("p",[t._v("使用current_timestamp函数获取当前日期和时间，然后使用week函数计算当前日期是一年中的第几周。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* | SELECT current_timestamp, week(current_timestamp)\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4856990361/p324222.png",alt:"week"}})])])]),t._v(" "),_("h2",{attrs:{id:"week-of-year函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#week-of-year函数"}},[t._v("#")]),t._v(" week_of_year函数")]),t._v(" "),_("p",[t._v("week_of_year函数用于计算目标日期是在一年中的第几周。week_of_year函数等同于week函数。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("week_of_year(x)\n")])])]),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("参数值为date、timestamp类型。")])])])]),t._v(" "),_("p",[t._v("bigint类型。")]),t._v(" "),_("p",[t._v("使用current_timestamp函数获取当前日期和时间，然后使用week_of_year函数计算当前日期是一年中的第几周。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* | SELECT current_timestamp, week_of_year(current_timestamp)\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4856990361/p324222.png",alt:"week"}})])])]),t._v(" "),_("h2",{attrs:{id:"year函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#year函数"}},[t._v("#")]),t._v(" year函数")]),t._v(" "),_("p",[t._v("year函数用于提取目标日期中的年份。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("year(x)\n")])])]),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("参数值为date、timestamp类型。")])])])]),t._v(" "),_("p",[t._v("bigint类型。")]),t._v(" "),_("p",[t._v("使用current_timestamp函数获取当前日期和时间，然后使用year函数提取当前日期中的年份。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* | SELECT current_timestamp,year(current_timestamp)\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4856990361/p324224.png",alt:"year"}})])])]),t._v(" "),_("h2",{attrs:{id:"year-of-week函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#year-of-week函数"}},[t._v("#")]),t._v(" year_of_week函数")]),t._v(" "),_("p",[t._v("year_of_week函数用于返回目标日期在ISO周日历中的年份。year_of_week函数等同于yow函数。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("year_of_week(x)\n")])])]),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("参数值为date、timestamp类型。")])])])]),t._v(" "),_("p",[t._v("bigint类型。")]),t._v(" "),_("p",[t._v("使用current_timestamp函数获取当前日期和时间，然后使用year_of_week函数返回当前日期在ISO周日历中的年份。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* | SELECT current_timestamp,year_of_week(current_timestamp)\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4856990361/p324228.png",alt:"year_of_week"}})])])]),t._v(" "),_("h2",{attrs:{id:"yow函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#yow函数"}},[t._v("#")]),t._v(" yow函数")]),t._v(" "),_("p",[t._v("yow函数用于返回目标日期在ISO周日历中的年份。yow函数等同于year_of_week函数。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("yow(x)\n")])])]),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("参数值为date、timestamp类型。")])])])]),t._v(" "),_("p",[t._v("bigint类型。")]),t._v(" "),_("p",[t._v("使用current_timestamp函数获取当前日期和时间，然后使用yow函数返回当前日期在ISO周日历中的年份。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* | SELECT current_timestamp, yow(current_timestamp)\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4856990361/p324228.png",alt:"year_of_week"}})])])]),t._v(" "),_("h2",{attrs:{id:"date-trunc函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#date-trunc函数"}},[t._v("#")]),t._v(" date_trunc函数")]),t._v(" "),_("p",[t._v("date_trunc函数会根据您指定的时间单位截断日期和时间表达式，并按照毫秒、秒、分钟，小时、日、月或年对齐。该函数常用于需要按照时间进行统计分析的场景。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("date_trunc(unit, x)\n")])])]),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("unit")])]),t._v(" "),_("td",[t._v("时间单位，取值为millisecond、second、minute、hour、day、week、month、quarter、year。更多信息，请参见"),_("a",{attrs:{href:"#LogService-user-guide-0110/section-z07-k3z-j0l"}},[t._v("unit说明")]),t._v("。")])]),t._v(" "),_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("参数值为日期和时间表达式。")])])])]),t._v(" "),_("p",[_("strong",[t._v("说明")]),t._v(" date_trunc函数只能按照固定的时间间隔统计（例如每分钟、每小时等）。如果您需要按照灵活的时间维度统计，请使用数学取模方法进行分组，例如统计每5分钟的数据。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* | SELECT count(1) AS pv,  __time__ - __time__ %300 AS time GROUP BY time LIMIT 100\n")])])]),_("p",[t._v("与参数值的类型一致。")]),t._v(" "),_("p",[t._v("按照每分钟的时间粒度计算请求时间的平均值，并按照时间进行分组和排序。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* |\nSELECT\n  date_trunc('minute', __time__) AS time,\n  truncate (avg(request_time)) AS avg_time,\n  current_date AS date\nGROUP BY\n  time\nORDER BY\n  time DESC\nLIMIT\n  100\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7632296261/p297061.png",alt:"date_trunc"}})])])]),t._v(" "),_("h2",{attrs:{id:"date-add函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#date-add函数"}},[t._v("#")]),t._v(" date_add函数")]),t._v(" "),_("p",[t._v("date_add函数用于在日期或时间中添加或减去指定的时间间隔。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("date_add(unit, n, x)\n")])])]),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("unit")])]),t._v(" "),_("td",[t._v("时间单位，取值为millisecond、second、minute、hour、day、week、month、quarter、year。更多信息，请参见"),_("a",{attrs:{href:"#LogService-user-guide-0110/section-z07-k3z-j0l"}},[t._v("unit说明")]),t._v("。")])]),t._v(" "),_("tr",[_("td",[_("em",[t._v("n")])]),t._v(" "),_("td",[t._v("时间间隔。")])]),t._v(" "),_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("参数值为timestamp类型日期和时间表达式。")])])])]),t._v(" "),_("p",[t._v("timestamp类型。")]),t._v(" "),_("p",[t._v("查询昨天的日志。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* |\nSELECT\n  *\nFROM  log\nWHERE\n  __time__ < to_unixtime(current_date)\n  AND __time__ > to_unixtime(date_add('day', -1, current_date))\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6632296261/p295473.png",alt:"current_date"}})])])]),t._v(" "),_("h2",{attrs:{id:"date-diff函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#date-diff函数"}},[t._v("#")]),t._v(" date_diff函数")]),t._v(" "),_("p",[t._v("date_diff函数用于计算两个日期或时间之间的差值。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("date_diff(unit, x, y)\n")])])]),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("unit")])]),t._v(" "),_("td",[t._v("时间单位，取值为millisecond、second、minute、hour、day、week、month、quarter、year。更多信息，请参见"),_("a",{attrs:{href:"#LogService-user-guide-0110/section-z07-k3z-j0l"}},[t._v("unit说明")]),t._v("。")])]),t._v(" "),_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("参数值为timestamp类型日期和时间表达式。")])]),t._v(" "),_("tr",[_("td",[_("em",[t._v("y")])]),t._v(" "),_("td",[t._v("参数值为timestamp类型日期和时间表达式。")])])])]),t._v(" "),_("p",[t._v("bigint类型。")]),t._v(" "),_("p",[t._v("通过UsageStartTime字段和UsageEndTime字段计算服务器使用的总时长。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* | SELECT  date_diff('hour', UsageStartTime, UsageEndTime) AS \"时间差(小时)\"\n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1896647261/p299364.png",alt:"date_diff"}})])])]),t._v(" "),_("h2",{attrs:{id:"time-series函数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#time-series函数"}},[t._v("#")]),t._v(" time_series函数")]),t._v(" "),_("p",[t._v("time_series函数用于补全您查询时间窗口内缺失的数据。\n"),_("strong",[t._v("注意")]),t._v(" time_series函数必须搭配GROUP BY语法和ORDER BY语法使用，且ORDER BY语法不支持DESC排序方式。")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("time_series(x, window_time, format, padding_data)\n")])])]),_("table",[_("thead",[_("tr",[_("th",[t._v("参数")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[_("em",[t._v("x")])]),t._v(" "),_("td",[t._v("时间列，例如__time__。时间列的值为long类型或timestamp类型。")])]),t._v(" "),_("tr",[_("td",[_("em",[t._v("window_time")])]),t._v(" "),_("td",[t._v("窗口大小，单位为s（秒）、m（分）、h（小时）、d（天）。例如2h、5m、3d。")])]),t._v(" "),_("tr",[_("td",[_("em",[t._v("format")])]),t._v(" "),_("td",[t._v("返回结果的时间格式。更多信息，请参见"),_("a",{attrs:{href:"#LogService-user-guide-0110/section-8g8-2xm-kdv"}},[t._v("format说明")]),t._v("。")])]),t._v(" "),_("tr",[_("td",[_("em",[t._v("padding_data")])]),t._v(" "),_("td",[t._v("补全的内容。包括： * 0：将缺失的值设置为0。  * null：将缺失的值设置为null。  * last：将缺失的值设置了上一个时间点对应的值。  * next：将缺失的值设置了下一个时间点对应的值。  * avg：将缺失的值设置为前后两个时间点的平均值。")])])])]),t._v(" "),_("p",[t._v("bigint类型。")]),t._v(" "),_("p",[t._v("按照两个小时的时间粒度进行数据补全，将缺失的值设置为0。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("查询和分析语句")]),t._v(" "),_("div",{staticClass:"language-unknow extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("* | select time_series(__time__, '2h', '%Y-%m-%d %H:%i:%s', '0')  as time, count(*) as num from log group by time order by time                        \n")])])])]),t._v(" "),_("li",[_("p",[t._v("查询和分析结果")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0942576261/p37530.png",alt:"时间补全函数示例图"}})])])]),t._v(" "),_("h2",{attrs:{id:"format说明"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#format说明"}},[t._v("#")]),t._v(" format说明")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("format")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("%a")]),t._v(" "),_("td",[t._v("星期的缩写。例如Sun、Sat。")])]),t._v(" "),_("tr",[_("td",[t._v("%b")]),t._v(" "),_("td",[t._v("月份的缩写。例如Jan、Dec。")])]),t._v(" "),_("tr",[_("td",[t._v("%c")]),t._v(" "),_("td",[t._v("月份。数值类型，取值范围为1~12。")])]),t._v(" "),_("tr",[_("td",[t._v("%D")]),t._v(" "),_("td",[t._v("每月的第几天。需加上后缀，例如0th、1st、2nd、3rd。")])]),t._v(" "),_("tr",[_("td",[t._v("%d")]),t._v(" "),_("td",[t._v("每月的第几天。十进制格式，取值范围为01~31。")])]),t._v(" "),_("tr",[_("td",[t._v("%e")]),t._v(" "),_("td",[t._v("每月的第几天。十进制格式，取值范围为1~31。")])]),t._v(" "),_("tr",[_("td",[t._v("%H")]),t._v(" "),_("td",[t._v("小时，24小时制。")])]),t._v(" "),_("tr",[_("td",[t._v("%h")]),t._v(" "),_("td",[t._v("小时，12小时制。")])]),t._v(" "),_("tr",[_("td",[t._v("%I")]),t._v(" "),_("td",[t._v("小时，12小时制。")])]),t._v(" "),_("tr",[_("td",[t._v("%i")]),t._v(" "),_("td",[t._v("分钟。数值类型，取值范围为00~59。")])]),t._v(" "),_("tr",[_("td",[t._v("%j")]),t._v(" "),_("td",[t._v("每年的第几天。取值范围为001~366。")])]),t._v(" "),_("tr",[_("td",[t._v("%k")]),t._v(" "),_("td",[t._v("小时。取值范围为0~23。")])]),t._v(" "),_("tr",[_("td",[t._v("%l")]),t._v(" "),_("td",[t._v("小时。取值范围为1~12。")])]),t._v(" "),_("tr",[_("td",[t._v("%M")]),t._v(" "),_("td",[t._v("月份的英文表达，例如January、December。")])]),t._v(" "),_("tr",[_("td",[t._v("%m")]),t._v(" "),_("td",[t._v("月份。数值格式，取值范围为01~12。")])]),t._v(" "),_("tr",[_("td",[t._v("%p")]),t._v(" "),_("td",[t._v("AM、PM。")])]),t._v(" "),_("tr",[_("td",[t._v("%r")]),t._v(" "),_("td",[t._v("时间。12小时制，格式为"),_("code",[t._v("hh:mm:ss AM/PM")]),t._v("。")])]),t._v(" "),_("tr",[_("td",[t._v("%S")]),t._v(" "),_("td",[t._v("秒。取值范围为00~59。")])]),t._v(" "),_("tr",[_("td",[t._v("%s")]),t._v(" "),_("td",[t._v("秒。取值范围为00~59。")])]),t._v(" "),_("tr",[_("td",[t._v("%T")]),t._v(" "),_("td",[t._v("时间。24小时制，格式为"),_("code",[t._v("hh:mm:ss")]),t._v("。")])]),t._v(" "),_("tr",[_("td",[t._v("%V")]),t._v(" "),_("td",[t._v("每年的第几周，星期日是一周的第一天。取值范围为01~53。")])]),t._v(" "),_("tr",[_("td",[t._v("%v")]),t._v(" "),_("td",[t._v("每年的第几周，星期一是一周的第一天。取值范围为01~53。")])]),t._v(" "),_("tr",[_("td",[t._v("%W")]),t._v(" "),_("td",[t._v("星期几的名称。例如Sunday、Saturday。")])]),t._v(" "),_("tr",[_("td",[t._v("%w")]),t._v(" "),_("td",[t._v("一周的第几天，星期日为第0天。")])]),t._v(" "),_("tr",[_("td",[t._v("%Y")]),t._v(" "),_("td",[t._v("4位数的年份。例如2020。")])]),t._v(" "),_("tr",[_("td",[t._v("%y")]),t._v(" "),_("td",[t._v("2位数的年份。例如20。")])]),t._v(" "),_("tr",[_("td",[t._v("%%")]),t._v(" "),_("td",[t._v("%的转义字符。")])])])]),t._v(" "),_("h2",{attrs:{id:"unit说明"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#unit说明"}},[t._v("#")]),t._v(" unit说明")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("unit")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("millisecond")]),t._v(" "),_("td",[t._v("毫秒")])]),t._v(" "),_("tr",[_("td",[t._v("second")]),t._v(" "),_("td",[t._v("秒")])]),t._v(" "),_("tr",[_("td",[t._v("minute")]),t._v(" "),_("td",[t._v("分钟")])]),t._v(" "),_("tr",[_("td",[t._v("hour")]),t._v(" "),_("td",[t._v("小时")])]),t._v(" "),_("tr",[_("td",[t._v("day")]),t._v(" "),_("td",[t._v("天")])]),t._v(" "),_("tr",[_("td",[t._v("week")]),t._v(" "),_("td",[t._v("周")])]),t._v(" "),_("tr",[_("td",[t._v("month")]),t._v(" "),_("td",[t._v("月")])]),t._v(" "),_("tr",[_("td",[t._v("quarter")]),t._v(" "),_("td",[t._v("季度")])]),t._v(" "),_("tr",[_("td",[t._v("year")]),t._v(" "),_("td",[t._v("年")])])])])])}),[],!1,null,null,null);_.default=v.exports}}]);